<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>单字图片生成器</title><style>*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}html{overflow:hidden}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;overscroll-behavior:contain;overflow:hidden}.container{background:#fff;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.3);padding:24px;max-width:1000px;width:100%;max-height:calc(100vh - 40px);overflow:visible;display:flex;flex-direction:column}h1{text-align:center;color:#333;margin-bottom:16px;font-size:22px}.content{display:grid;grid-template-columns:1fr 1fr;gap:24px;height:100%;overflow:hidden}.controls{display:flex;flex-direction:column;gap:16px;overscroll-behavior:contain;overflow-y:auto;overflow-x:hidden;max-height:calc(100vh - 140px);padding-right:8px;scrollbar-width:none;-ms-overflow-style:none}.controls::-webkit-scrollbar{display:none}.control-group{display:flex;flex-direction:column;gap:6px;overscroll-behavior:contain;position:relative}.color-row{display:flex;flex-direction:column;gap:10px}.color-pickers{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.color-item{display:flex;flex-direction:column;gap:4px;align-items:center}.color-item label{font-size:11px;white-space:nowrap}.color-item input[type=color]{width:48px;height:48px}.control-group:has(input[type="range"]){user-select:none;-webkit-user-select:none}label{font-weight:600;color:#555;font-size:12px}input[type=text]{padding:8px 10px;border:2px solid #e0e0e0;border-radius:6px;font-size:14px;transition:border-color .3s}input[type=text]:focus{outline:0;border-color:#667eea}input[type=range]{width:100%;height:8px;border-radius:4px;background:#e0e0e0;outline:0;-webkit-appearance:none;touch-action:pan-x;will-change:transform;transform:translateZ(0);-webkit-transform:translateZ(0)}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:24px;height:24px;border-radius:50%;background:#667eea;cursor:pointer;transition:none;box-shadow:0 2px 6px rgba(0,0,0,0.2);-webkit-tap-highlight-color:transparent}input[type=range]::-webkit-slider-thumb:active{background:#5568d3}input[type=range]::-moz-range-thumb{width:24px;height:24px;border-radius:50%;background:#667eea;cursor:pointer;border:none;box-shadow:0 2px 6px rgba(0,0,0,0.2)}input[type=color]{width:100%;aspect-ratio:1;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;padding:0}.range-value{display:flex;justify-content:space-between;align-items:center;margin-top:2px}.range-value span{font-size:10px;color:#888}.range-value .current-value{font-weight:600;color:#667eea;font-size:12px}.preview-area{display:flex;flex-direction:column;align-items:center;gap:12px;position:sticky;top:0;align-self:start}.canvas-wrapper{background:#f5f5f5;padding:12px;border-radius:8px;display:flex;justify-content:center;align-items:center}canvas{box-shadow:0 4px 12px rgba(0,0,0,.1);width:360px;height:360px;display:block;transform:translateZ(0);-webkit-transform:translateZ(0)}.button-group{display:flex;gap:8px;width:100%}.button-group.three-cols{display:grid;grid-template-columns:1fr 1fr 1fr}button{flex:1;padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.4)}.btn-secondary{background:#f0f0f0;color:#555}.btn-secondary:hover{background:#e0e0e0}.preset-colors{display:flex;flex-wrap:wrap;gap:6px;flex:1}.preset-color{width:32px;height:32px;border-radius:6px;cursor:pointer;border:2px solid transparent;transition:all .2s;flex-shrink:0}.preset-color:hover{transform:scale(1.1);border-color:#667eea;box-shadow:0 2px 8px rgba(0,0,0,0.15)}@media(max-width:768px){html{overflow:auto}body{padding:10px;align-items:flex-start;padding-top:20px;overflow:auto;min-height:100vh;height:auto}.content{grid-template-columns:1fr;gap:20px}.container{padding:15px;border-radius:15px;max-height:none;overflow:visible}.controls{max-height:none;overflow:visible;gap:14px}h1{font-size:20px;margin-bottom:16px}.color-row{flex-direction:column;gap:10px}.color-pickers{flex-wrap:wrap;gap:10px}.color-item{flex-direction:row;gap:10px;align-items:center;justify-content:flex-start}.color-item label{font-size:12px;min-width:40px}.color-item input[type=color]{width:44px;height:44px}.preset-colors{width:100%;justify-content:flex-start;margin-top:4px}.preset-color{width:38px;height:38px}.canvas-wrapper{padding:15px}canvas{width:100%!important;height:auto!important;max-width:100%;aspect-ratio:1/1}.canvas-wrapper canvas{aspect-ratio:1/1;object-fit:contain}.preview-area{position:static}.button-group{flex-direction:row}button{padding:12px 20px;font-size:15px}}</style></head><body><div class="container"><h1>✨ 单字图片生成器</h1><div class="content"><div class="controls"><div class="control-group"><label>输入文字</label><input type="text" id="textInput" value="字" maxlength="1" placeholder="请输入一个字"></div><div class="color-row"><div class="color-pickers"><div class="color-item"><label>背景</label><input type="color" id="bgColor" value="#FF6B6B"></div><div class="color-item"><label>文字</label><input type="color" id="textColor" value="#FFFFFF"></div></div><div class="preset-colors"><div class="preset-color" style="background:#FF6B6B" data-color="#FF6B6B"></div><div class="preset-color" style="background:#4ECDC4" data-color="#4ECDC4"></div><div class="preset-color" style="background:#45B7D1" data-color="#45B7D1"></div><div class="preset-color" style="background:#FFA07A" data-color="#FFA07A"></div><div class="preset-color" style="background:#98D8C8" data-color="#98D8C8"></div><div class="preset-color" style="background:#F7DC6F" data-color="#F7DC6F"></div><div class="preset-color" style="background:#BB8FCE" data-color="#BB8FCE"></div><div class="preset-color" style="background:#85C1E2" data-color="#85C1E2"></div><div class="preset-color" style="background:#F8B500" data-color="#F8B500"></div><div class="preset-color" style="background:#52B788" data-color="#52B788"></div><div class="preset-color" style="background:#3B82F6" data-color="#3B82F6"></div><div class="preset-color" style="background:#60A5FA" data-color="#60A5FA"></div><div class="preset-color" style="background:#93C5FD" data-color="#93C5FD"></div><div class="preset-color" style="background:#1E40AF" data-color="#1E40AF"></div><div class="preset-color" style="background:#06B6D4" data-color="#06B6D4"></div><div class="preset-color" style="background:#FF69B4" data-color="#FF69B4"></div><div class="preset-color" style="background:#FFB6C1" data-color="#FFB6C1"></div><div class="preset-color" style="background:#FFC0CB" data-color="#FFC0CB"></div><div class="preset-color" style="background:#FF1493" data-color="#FF1493"></div><div class="preset-color" style="background:#DB7093" data-color="#DB7093"></div></div></div><div class="control-group"><label>圆角程度</label><input type="range" id="borderRadius" min="0" max="100" value="20"><div class="range-value"><span>正方形</span><span class="current-value" id="radiusValue">20%</span><span>圆形</span></div></div><div class="control-group"><label>字体大小</label><input type="range" id="fontSize" min="80" max="300" value="240"><div class="range-value"><span>小</span><span class="current-value" id="fontSizeValue">240px</span><span>大</span></div></div></div><div class="preview-area"><div class="canvas-wrapper"><canvas id="canvas"></canvas></div><div class="button-group"><button class="btn-secondary" onclick="resetSettings()">重置</button><button class="btn-primary" onclick="downloadImage()">下载图片</button></div></div></div></div><script>const canvas=document.getElementById('canvas'),ctx=canvas.getContext('2d',{willReadFrequently:false}),textInput=document.getElementById('textInput'),bgColor=document.getElementById('bgColor'),textColor=document.getElementById('textColor'),borderRadius=document.getElementById('borderRadius'),fontSize=document.getElementById('fontSize');const dpr=window.devicePixelRatio||1;const isMobile=window.innerWidth<=768;const displaySize=360;const actualSize=displaySize*Math.max(dpr,2);canvas.width=actualSize;canvas.height=actualSize;if(!isMobile){canvas.style.width=displaySize+'px';canvas.style.height=displaySize+'px'}ctx.scale(actualSize/displaySize,actualSize/displaySize);if(isMobile){function updateCanvasSize(){const canvasWrapper=canvas.parentElement;const wrapperWidth=canvasWrapper.offsetWidth-30;canvas.style.width=wrapperWidth+'px';canvas.style.height=wrapperWidth+'px'}updateCanvasSize();window.addEventListener('resize',updateCanvasSize)}const controls=document.querySelector('.controls');let isSliding=false;document.querySelectorAll('input[type="range"]').forEach(slider=>{slider.addEventListener('mousedown',function(e){isSliding=true;if(controls){controls.style.overflow='hidden'}document.body.style.userSelect='none'});slider.addEventListener('touchstart',function(e){isSliding=true;if(controls){controls.style.overflow='hidden'}},{passive:true})});document.addEventListener('mouseup',function(){if(isSliding){isSliding=false;if(controls){controls.style.overflow='auto'}document.body.style.userSelect=''}});document.addEventListener('touchend',function(){if(isSliding){isSliding=false;if(controls){controls.style.overflow='auto'}}});let rafId=null;let lastDrawTime=0;const MIN_DRAW_INTERVAL=16;function requestDraw(){if(rafId!==null)return;const now=Date.now();const timeSinceLastDraw=now-lastDrawTime;if(timeSinceLastDraw<MIN_DRAW_INTERVAL){rafId=setTimeout(()=>{rafId=null;requestDraw()},MIN_DRAW_INTERVAL-timeSinceLastDraw);return}rafId=requestAnimationFrame(()=>{rafId=null;lastDrawTime=Date.now();drawImage()})}document.querySelectorAll('.preset-color').forEach(color=>{color.addEventListener('click',function(){bgColor.value=this.dataset.color;requestDraw()})});textInput.addEventListener('input',requestDraw);bgColor.addEventListener('input',requestDraw);textColor.addEventListener('input',requestDraw);borderRadius.addEventListener('input',function(){document.getElementById('radiusValue').textContent=this.value+'%';requestDraw()});fontSize.addEventListener('input',function(){document.getElementById('fontSizeValue').textContent=this.value+'px';requestDraw()});function drawImage(){const size=displaySize,text=textInput.value||'字',bg=bgColor.value,color=textColor.value,radiusPercent=parseInt(borderRadius.value),fSize=parseInt(fontSize.value);ctx.imageSmoothingEnabled=true;ctx.imageSmoothingQuality='high';ctx.clearRect(0,0,size,size);ctx.fillStyle=bg;ctx.beginPath();if(radiusPercent===100){ctx.arc(size/2,size/2,size/2,0,Math.PI*2)}else{const radius=(radiusPercent/100)*(size/2);ctx.moveTo(radius,0);ctx.lineTo(size-radius,0);ctx.quadraticCurveTo(size,0,size,radius);ctx.lineTo(size,size-radius);ctx.quadraticCurveTo(size,size,size-radius,size);ctx.lineTo(radius,size);ctx.quadraticCurveTo(0,size,0,size-radius);ctx.lineTo(0,radius);ctx.quadraticCurveTo(0,0,radius,0)}ctx.closePath();ctx.fill();ctx.fillStyle=color;ctx.font=`bold ${fSize}px "PingFang SC","Microsoft YaHei",sans-serif`;ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(text,size/2,size/2)}function downloadImage(){const link=document.createElement('a'),text=textInput.value||'字',timestamp=new Date().getTime();link.download=`${text}_${timestamp}.png`;link.href=canvas.toDataURL('image/png',1.0);link.click()}function resetSettings(){textInput.value='字';bgColor.value='#FF6B6B';textColor.value='#FFFFFF';borderRadius.value=20;fontSize.value=240;document.getElementById('radiusValue').textContent='20%';document.getElementById('fontSizeValue').textContent='240px';requestDraw()}drawImage()</script></body></html>
