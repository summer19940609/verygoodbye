<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL 正则转义工具</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; padding: 20px; background-color: #f0f2f5; color: #333; }
        .container { max-width: 700px; margin: 40px auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h2 { margin-top: 0; color: #1a1a1a; font-size: 1.5rem; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .label { font-weight: 600; margin: 15px 0 8px; display: block; font-size: 0.9rem; color: #666; }
        
        textarea { 
            width: 100%; height: 80px; padding: 12px; box-sizing: border-box; 
            border: 1px solid #ddd; border-radius: 6px; font-family: "SFMono-Regular", Consolas, monospace;
            resize: vertical; outline: none; transition: border-color 0.2s;
        }
        textarea:focus { border-color: #007bff; }

        /* 使用 pre 标签的样式 */
        pre#result { 
            background: #272822; color: #f8f8f2; padding: 15px; border-radius: 6px; 
            overflow-x: auto; font-family: "SFMono-Regular", Consolas, monospace;
            margin: 10px 0; white-space: pre-wrap; word-break: break-all;
            border-left: 4px solid #66d9ef;
        }

        .btn-group { margin-top: 20px; display: flex; gap: 10px; }
        button { 
            flex: 1; padding: 12px; border: none; border-radius: 6px; 
            font-weight: bold; cursor: pointer; transition: opacity 0.2s;
        }
        .btn-convert { background: #007bff; color: white; }
        .btn-copy { background: #28a745; color: white; display: none; }
        button:hover { opacity: 0.9; }
        code { background: #eee; padding: 2px 4px; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>

<div class="container">
    <h2>URL 抓包正则转换</h2>
    <p style="font-size: 0.85rem; color: #888;">自动转换 <code>.</code>, <code>/</code> 并规范化协议头 <code>^https?</code></p>
    
    <span class="label">输入原始 URL:</span>
    <textarea id="inputUrl" placeholder="https://example.com/api/path" oninput="convertUrl()"></textarea>
    
    <span class="label">转换结果:</span>
    <pre id="result">等待输入...</pre>
    
    <div class="btn-group">
        <button class="btn-convert" onclick="convertUrl()">强制刷新转换</button>
        <button id="copyBtn" class="btn-copy" onclick="copyText()">复制结果</button>
    </div>
</div>

<script>
    function convertUrl() {
        const input = document.getElementById('inputUrl').value.trim();
        const resultElement = document.getElementById('result');
        const copyBtn = document.getElementById('copyBtn');

        if (!input) {
            resultElement.innerText = "等待输入...";
            copyBtn.style.display = "none";
            return;
        }

        // 执行替换逻辑
        let processed = input
            .replace(/\./g, '\\.')        // . -> \.
            .replace(/\//g, '\\/')        // / -> \/
            .replace(/^https?/, '^https?'); // 开头 -> ^https?

        resultElement.innerText = processed;
        copyBtn.style.display = "block";
    }

    function copyText() {
        const text = document.getElementById('result').innerText;
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.getElementById('copyBtn');
            const originalText = btn.innerText;
            btn.innerText = "✅ 已复制";
            setTimeout(() => { btn.innerText = originalText; }, 1500);
        });
    }
</script>

</body>
</html>