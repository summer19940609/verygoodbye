<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL 抓包规则生成器</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; padding: 20px; background-color: #f5f7f9; color: #2c3e50; }
        .container { max-width: 800px; margin: 20px auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        h2 { margin-top: 0; font-size: 1.4rem; color: #333; border-left: 4px solid #007bff; padding-left: 10px; }
        .label { font-weight: bold; margin: 15px 0 8px; display: block; font-size: 0.9rem; }
        
        textarea { 
            width: 100%; height: 60px; padding: 12px; box-sizing: border-box; 
            border: 1px solid #ddd; border-radius: 6px; font-family: monospace;
            font-size: 14px; outline: none;
        }
        textarea:focus { border-color: #007bff; }

        pre { 
            background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 6px; 
            overflow-x: auto; font-family: Consolas, monospace; font-size: 13px;
            margin: 10px 0; white-space: pre-wrap; word-break: break-all;
        }

        .copy-group { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .copy-group pre { flex: 1; margin: 0; }
        
        button { 
            padding: 8px 15px; border: none; border-radius: 5px; 
            background: #007bff; color: white; cursor: pointer; font-size: 13px;
        }
        button:hover { background: #0056b3; }
        .btn-success { background: #28a745; }
    </style>
</head>
<body>

<div class="container">
    <h2>URL 抓包规则生成器</h2>
    
    <span class="label">1. 输入原始 URL:</span>
    <textarea id="inputUrl" placeholder="粘贴 URL，例如：https://maicai.api.ddxq.mobi/..." oninput="convert()"></textarea>
    
    <span class="label">2. 纯正则结果:</span>
    <div class="copy-group">
        <pre id="regexResult">等待输入...</pre>
        <button onclick="copy('regexResult')">复制</button>
    </div>

    <span class="label">3. 完整指令行 (response-body-json-jq):</span>
    <div class="copy-group">
        <pre id="fullCommand">等待输入...</pre>
        <button onclick="copy('fullCommand')">复制</button>
    </div>
</div>

<script>
    function convert() {
        const input = document.getElementById('inputUrl').value.trim();
        const regexRes = document.getElementById('regexResult');
        const fullRes = document.getElementById('fullCommand');

        if (!input) {
            regexRes.innerText = "等待输入...";
            fullRes.innerText = "等待输入...";
            return;
        }

        // 核心转换逻辑
        let regex = input
            .replace(/\./g, '\\.')         // . -> \.
            .replace(/\//g, '\\/')         // / -> \/
            .replace(/^https?/, '^https?'); // 开头 -> ^https?

        // 输出纯正则
        regexRes.innerText = regex;

        // 输出带指令的整行
        fullRes.innerText = `${regex} response-body-json-jq ''`;
    }

    function copy(elementId) {
        const text = document.getElementById(elementId).innerText;
        if (text.includes("等待输入")) return;
        
        navigator.clipboard.writeText(text).then(() => {
            const btn = event.target;
            const oldText = btn.innerText;
            btn.innerText = "已复制";
            btn.classList.add('btn-success');
            setTimeout(() => { 
                btn.innerText = oldText; 
                btn.classList.remove('btn-success');
            }, 1000);
        });
    }
</script>

</body>
</html>
